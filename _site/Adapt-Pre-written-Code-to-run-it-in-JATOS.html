<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" jatos.js, jatosify, javascript, jsPsych, initialize">
<title>Adapt Pre written Code to run it in JATOS (Jatosify) | JATOS Documentatio</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html"><img src="images/jatos_logo_color.svg" height="20">&nbsp;<span class="projectTitle"> JATOS Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="https://github.com/JATOS/JATOS/releases" target="_blank">Download</a></li>
                
                
                
                <li><a href="https://github.com/JATOS/JATOS_examples/wiki/Example-Studies" target="_blank">Example Studies</a></li>
                
                
                
                <li><a href="https:/blog.jatos.org" target="_blank">Blog</a></li>
                
                
                
                <li><a href="Contact-us.html">Contact</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Adapt Pre written Code to run it in JATOS (Jatosify)">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="Installation.html">Installation</a></li>
            
            
            
            
            
            
            <li><a href="Get-started.html">Get started</a></li>
            
            
            
            
            
            
            <li><a href="Set-up-your-own-studies.html">Set up your own studies</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Beyond the basics</a>
        <ul>
            
            
            
            <li><a href="Run-your-Study-with-Batch-Manager-and-Worker-Setup.html">Run your Study with Batch Manager & Worker Setup</a></li>
            
            
            
            
            
            
            <li><a href="Worker-Types.html">Worker Types</a></li>
            
            
            
            
            
            
            <li><a href="Two-Types-of-Session-Data.html">Two Types of Session Data</a></li>
            
            
            
            
            
            
            <li><a href="Mandatory-lines-in-your-components-HTML.html">Mandatory lines in your components' HTML</a></li>
            
            
            
            
            
            
            <li class="active"><a href="Adapt-Pre-written-Code-to-run-it-in-JATOS.html">Adapt Pre written Code to run it in JATOS (Jatosify)</a></li>
            
            
            
            
            
            
            <li><a href="jsPsych-and-JATOS.html">jsPsych and JATOS</a></li>
            
            
            
            
            
            
            <li><a href="Tips-and-Tricks.html">Tips & Tricks</a></li>
            
            
            
            
            
            
            <li><a href="Connect-to-Mechanical-Turk.html">Connect to Mechanical Turk</a></li>
            
            
            
            
            
            
            <li><a href="Troubleshooting.html">Troubleshooting</a></li>
            
            
            
            
            
            
            <li><a href="Update-JATOS.html">Update JATOS</a></li>
            
            
            
            
            
            
            <li><a href="Data-Privacy-and-Ethics.html">Data Privacy and Ethics</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Group Studies</a>
        <ul>
            
            
            
            <li><a href="Example-Group-Studies.html">Example Group Studies</a></li>
            
            
            
            
            
            
            <li><a href="Group-Study-Properties.html">Group Study Properties</a></li>
            
            
            
            
            
            
            <li><a href="Write-Your-Own-Group-Studies.html">Write Your Own Group Studies</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">For admins</a>
        <ul>
            
            
            
            <li><a href="JATOS-on-a-server.html">JATOS on a server</a></li>
            
            
            
            
            
            
            <li><a href="Configure-JATOS-on-a-Server.html">Configure JATOS on a Server</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-with-Nginx.html">JATOS with Nginx</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-with-Apache.html">JATOS with Apache</a></li>
            
            
            
            
            
            
            <li><a href="Install-JATOS-via-Docker.html">Install JATOS via Docker</a></li>
            
            
            
            
            
            
            <li><a href="JATOS-in-Amazons-Cloud-without-Docker.html">JATOS in Amazon's Cloud (without Docker)</a></li>
            
            
            
            
            
            
            <li><a href="Updating-a-JATOS-server-installation.html">Updating a JATOS server installation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Reference</a>
        <ul>
            
            
            
            <li><a href="jatos.js-Reference.html">jatos.js Reference</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Adapt Pre written Code to run it in JATOS (Jatosify)</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" href="https://github.com/JATOS/JATOS_docs/blob/gh-pages/pages//Adapt-Pre-written-Code-to-run-it-in-JATOS.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

  <p><strong>Make Your Existing Code Run in JATOS - or How To Jatosify a Study</strong></p>

<p>You might have a  task, experiment, survey, or study running in a browser. You might have all its files like HTML, JavaScripts, images, etc. Maybe you wrote it with <a href="http://www.jspsych.org">jsPsych</a> or got it from <a href="http://expfactory.github.io">The Experiment Factory</a>. Do you want to run it with JATOS? That’s easy!</p>

<h3 id="create-the-study-in-jatos">Create the study in JATOS</h3>

<ol>
  <li>Create a new study with the ‘<strong>New Study</strong>’ button in JATOS’ header. Choose a study title and a folder name. Leave the other fields empty for now and click ‘Create’. JATOS will have created a new folder within your assets root folder (default is <code class="highlighter-rouge">/path_to_your_JATOS/study_assets_root/</code>).</li>
  <li>Copy all your files (HTML, JavaScripts, images, audio, …) into your new study folder.</li>
  <li>Back in the JATOS GUI, and within the newly created study, create a <strong>new component</strong> by clicking ‘Components’ and then ‘New’. Choose a component title and set the HTML file name, to the name of the HTML file you just copied into the study folder.</li>
  <li>
    <p>In your HTML and JavaScripts, change all paths to your <strong>study assets</strong> folder: Always use the prefix <code class="highlighter-rouge">/study_assets/</code> and then the study assets name you specified in your study’s properties when you created it.</p>

    <ul>
      <li>E.g. if you load the CSS file <code class="highlighter-rouge">snake.css</code> and the study’s assets name is <code class="highlighter-rouge">group_snake</code> use <code class="highlighter-rouge">&lt;link rel="stylesheet" type="text/css" href="/study_assets/group_snake/snake.css" /&gt;</code></li>
      <li>Or if you want to load some JavaScript from your local study assets with the name <code class="highlighter-rouge">prisoner_dilemma</code>, e.g. the jQuery library, use <code class="highlighter-rouge">&lt;script src="/study_assets/prisoner_dilemma/jquery-1.11.1.min.js"&gt;&lt;/script&gt;</code></li>
    </ul>
  </li>
  <li>Now it’s time for a first glimpse: Click the ‘<strong>Run</strong>’ button in either the study’s or the component’s toolbar. Your experiment should run like it did before without JATOS. Use the browser’s developer tools to check for eventually missing files and other occurring errors.</li>
</ol>

<h3 id="edit-your-html-and-javascript">Edit your HTML and JavaScript</h3>

<p>Up to this point JATOS served as a mere provider of your files. Now we want to use a feature of JATOS: We want to store your result data in JATOS’ safe database.</p>

<ol>
  <li>
    <p>Include the <strong>jatos.js</strong> library in your HTML <code class="highlighter-rouge">&lt;head&gt;</code></p>

    <p>Add the line <code class="highlighter-rouge">&lt;script src="/assets/javascripts/jatos.js"&gt;&lt;/script&gt;</code></p>
  </li>
  <li>
    <p>Add <strong><code class="highlighter-rouge">jatos.onload</code></strong></p>

    <p>Every study in JATOS starts with this call. So whatever you want to do in your study it should start there.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">jatos</span><span class="p">.</span><span class="nx">onLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// initialize and start your JavaScript here </span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>E.g. if you want to initialize a jsPsych experiment:</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">jatos</span><span class="p">.</span><span class="nx">onLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Now to actually send our result data to JATOS we use jatos.js’ function <strong><code class="highlighter-rouge">jatos.submitResultData</code></strong>. We can pass this function any data in text format including JSON, CSV or XML.</p>

    <p>E.g. if we want to send a JavaScript object as JSON</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">resultJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">myObject</span><span class="p">);</span>
<span class="nx">jatos</span><span class="p">.</span><span class="nx">submitResultData</span><span class="p">(</span><span class="nx">resultJson</span><span class="p">,</span> <span class="nx">jatos</span><span class="p">.</span><span class="nx">startNextComponent</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Conveniently but optionally <code class="highlighter-rouge">jatos.submitResultData</code> takes a second parameter which specifies what should be done after the result data got sent. Usually one want to jump to the next component (<code class="highlighter-rouge">jatos.startNextComponent</code>) or finish the study (<code class="highlighter-rouge">jatos.endStudy</code>).</p>

    <p>Another example where we use jsPsych: We have to put <code class="highlighter-rouge">jatos.submitResultData</code> into jsPsych’s <code class="highlighter-rouge">on_finish</code>:</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">on_finish</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Submit results to JATOS</span>
    <span class="kd">var</span> <span class="nx">resultJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">getData</span><span class="p">());</span>
    <span class="nx">jatos</span><span class="p">.</span><span class="nx">submitResultData</span><span class="p">(</span><span class="nx">resultJson</span><span class="p">,</span> <span class="nx">jatos</span><span class="p">.</span><span class="nx">startNextComponent</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
    </div>
  </li>
</ol>

<p>That’s about it. Infos about other jatos.js functions and variables you can find in the <a href="jatos.js-Reference.html">reference</a>.</p>

<h3 id="beyond-the-basics">Beyond the basics</h3>

<ul>
  <li>Think about dividing your study into <strong>several components</strong>. You could have separate components e.g. for introduction, training, experiment and feedback. You could even consider splitting the experiment into several parts. One advantage is that if your participant stops in the middle of your study you still have the result data of the first components. Also, you can re-use components in different studies.</li>
  <li>Use the study’s and component’s ‘<strong>JSON input data</strong>’. With them you can change variables of your code directly through JATOS’ GUI, which might come handy if someone isn’t good in JavaScript.</li>
  <li>You can add a <strong>quit button</strong> to your study to allow the participant to <a href="Data-Privacy-and-Ethics.html#things-you-should-consider-in-your-studies">abort at any time</a>.</li>
</ul>


    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
<span>Page last updated:</span> 29 Dec 2016
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>