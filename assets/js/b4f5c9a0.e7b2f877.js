"use strict";(self.webpackChunkjatos_docs=self.webpackChunkjatos_docs||[]).push([[2453],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(n),u=a,m=h["".concat(l,".").concat(u)]||h[u]||d[u]||o;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},35365:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=n(83117),a=(n(67294),n(3905));const o={title:"JATOS with Apache",slug:"/JATOS-with-Apache.html",sidebar_position:12},i=void 0,s={unversionedId:"Serving_the_Internet/JATOS-with-Apache",id:"version-3.9.1/Serving_the_Internet/JATOS-with-Apache",title:"JATOS with Apache",description:"This page provides an example configuration for using Apache as a reverse proxy in front of JATOS. While it's not strictly necessary to run JATOS behind a proxy, it is common practice to add encryption (HTTPS).",source:"@site/versioned_docs/version-3.9.1/Serving_the_Internet/JATOS-with-Apache.md",sourceDirName:"Serving_the_Internet",slug:"/JATOS-with-Apache.html",permalink:"/JATOS-with-Apache.html",draft:!1,editUrl:"https://github.com/JATOS/JATOS_docs/tree/main/versioned_docs/version-3.9.1/Serving_the_Internet/JATOS-with-Apache.md",tags:[],version:"3.9.1",lastUpdatedBy:"elisafilevich",lastUpdatedAt:1751480945,formattedLastUpdatedAt:"Jul 2, 2025",sidebarPosition:12,frontMatter:{title:"JATOS with Apache",slug:"/JATOS-with-Apache.html",sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"JATOS with Nginx",permalink:"/JATOS-with-Nginx.html"},next:{title:"jatos.js Reference",permalink:"/jatos.js-Reference.html"}},l={},c=[{value:"Example Config with HTTPS Encryption",id:"example-config-with-https-encryption",level:2},{value:"Restrict Access to the JATOS GUI to a Local Network (Optional)",id:"restrict-access-to-the-jatos-gui-to-a-local-network-optional",level:2},{value:"Serving Additional Static Files",id:"serving-additional-static-files",level:2}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This page provides an example configuration for using ",(0,a.kt)("a",{parentName:"p",href:"https://httpd.apache.org/"},"Apache")," as a reverse proxy in front of JATOS. While it's not strictly necessary to run JATOS behind a proxy, it is common practice to add encryption (HTTPS)."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Note:")," You must use at least Apache ",(0,a.kt)("strong",{parentName:"p"},"version 2.4"),", as JATOS relies on WebSockets, which are not supported in earlier versions."),(0,a.kt)("p",null,"A JATOS server that handles sensitive or private data should always use encryption (HTTPS). A good, free certificate provider is ",(0,a.kt)("a",{parentName:"p",href:"https://certbot.eff.org/"},"certbot.eff.org")," from the Electronic Frontier Foundation."),(0,a.kt)("p",null,"Enable the required Apache modules:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"a2enmod proxy proxy_http proxy_wstunnel http2 rewrite headers ssl\n")),(0,a.kt)("h2",{id:"example-config-with-https-encryption"},"Example Config with HTTPS Encryption"),(0,a.kt)("p",null,"Below is an example Apache proxy configuration. Save it as ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/apache2/sites-available/example.com.conf")," and enable it with ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo a2ensite example.com.conf"),". Adjust the server address (",(0,a.kt)("inlineCode",{parentName:"p"},"www.example.com"),") and the paths to your SSL certificate and key as needed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'ServerName www.example.com\n\n<VirtualHost *:80>\n  # Redirect all unencrypted traffic to HTTPS\n  Redirect "/" "https://www.example.com/"\n</VirtualHost>\n\n<VirtualHost *:443>\n  # SSL certificate for encryption\n  SSLEngine On\n  SSLCertificateFile /etc/ssl/certs/localhost.crt\n  SSLCertificateKeyFile /etc/ssl/private/localhost.key\n\n  # JATOS uses WebSockets for batch and group channels\n  RewriteEngine On\n  RewriteCond %{HTTP:Upgrade} =websocket [NC]\n  RewriteRule /(.*)           ws://localhost:9000/$1 [P,L]\n  RewriteCond %{HTTP:Upgrade} !=websocket [NC]\n  RewriteRule /(.*)           http://localhost:9000/$1 [P,L]\n</VirtualHost>\n')),(0,a.kt)("h2",{id:"restrict-access-to-the-jatos-gui-to-a-local-network-optional"},"Restrict Access to the JATOS GUI to a Local Network (Optional)"),(0,a.kt)("p",null,"All JATOS GUI pages start with ",(0,a.kt)("inlineCode",{parentName:"p"},"/jatos"),". As an additional security measure, you can restrict access to the GUI to certain networks. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'ServerName www.example.com\n\n<VirtualHost *:80>\n  Redirect "/" "https://www.example.com/"\n</VirtualHost>\n\n<VirtualHost *:443>\n  # Restrict access to JATOS\' GUI to the local network\n  <Location "/jatos">\n    Order deny,allow\n    Deny from all\n    Allow from 127.0.0.1 ::1\n    Allow from localhost\n    Allow from 192.168\n  </Location>\n\n  SSLEngine On\n  SSLCertificateFile /etc/ssl/certs/localhost.crt\n  SSLCertificateKeyFile /etc/ssl/private/localhost.key\n\n  RewriteEngine On\n  RewriteCond %{HTTP:Upgrade} =websocket [NC]\n  RewriteRule /(.*)           ws://localhost:9000/$1 [P,L]\n  RewriteCond %{HTTP:Upgrade} !=websocket [NC]\n  RewriteRule /(.*)           http://localhost:9000/$1 [P,L]\n</VirtualHost>\n')),(0,a.kt)("h2",{id:"serving-additional-static-files"},"Serving Additional Static Files"),(0,a.kt)("p",null,"The recommended way to store files needed in JATOS studies is the ",(0,a.kt)("a",{parentName:"p",href:"Write-your-own-Study-Basics-and-Beyond.html#study-assets"},"study assets folder"),". This ensures that only participants with a valid study code can access those files."),(0,a.kt)("p",null,"However, there are scenarios where you may want to store files outside the study assets folder\u2014for example, if you need to serve a large number of files, very large files, or want to enable caching. In such cases, it makes sense to serve them directly with Apache."),(0,a.kt)("p",null,"The following config assumes your static files are in ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/www/html/static"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'ServerName www.example.com\n\n<VirtualHost *:80>\n  Redirect "/" "https://www.example.com/"\n</VirtualHost>\n\n<VirtualHost *:443>\n  SSLEngine On\n  SSLCertificateFile /etc/ssl/certs/localhost.crt\n  SSLCertificateKeyFile /etc/ssl/private/localhost.key\n\n  RewriteEngine On\n\n  # WebSockets for JATOS batch and group channels\n  RewriteCond %{HTTP:Upgrade} =websocket [NC]\n  RewriteRule /(.*)           ws://localhost:9000/$1 [P,L]\n\n  # Serve static files directly\n  RewriteCond %{REQUEST_URI}  !^/static.*\n  RewriteCond %{HTTP:Upgrade} !=websocket [NC]\n  RewriteRule /(.*)           http://localhost:9000/$1 [P,L]\n</VirtualHost>\n')))}d.isMDXComponent=!0}}]);