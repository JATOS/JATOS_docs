"use strict";(self.webpackChunkjatos_docs=self.webpackChunkjatos_docs||[]).push([[5331],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,h=m["".concat(l,".").concat(c)]||m[c]||d[c]||o;return a?n.createElement(h,i(i({ref:t},u),{},{components:a})):n.createElement(h,i({ref:t},u))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6757:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(83117),r=(a(67294),a(3905));const o={title:"Adapt pre written code to run it in JATOS",slug:"/Adapt-pre-written-code-to-run-it-in-JATOS.html",sidebar_position:3},i=void 0,s={unversionedId:"Write_your_study/Adapt-pre-written-code-to-run-it-in-JATOS",id:"version-3.9.1/Write_your_study/Adapt-pre-written-code-to-run-it-in-JATOS",title:"Adapt pre written code to run it in JATOS",description:"Make your existing code run in JATOS: Do you have a task, experiment, survey, or study already running in a browser, complete with its HTML, JavaScripts, and image files? If you now want to run it with JATOS, this page will guide you through the process.",source:"@site/versioned_docs/version-3.9.1/Write_your_study/Adapt-pre-written-code-to-run-it-in-JATOS.md",sourceDirName:"Write_your_study",slug:"/Adapt-pre-written-code-to-run-it-in-JATOS.html",permalink:"/Adapt-pre-written-code-to-run-it-in-JATOS.html",draft:!1,editUrl:"https://github.com/JATOS/JATOS_docs/tree/main/versioned_docs/version-3.9.1/Write_your_study/Adapt-pre-written-code-to-run-it-in-JATOS.md",tags:[],version:"3.9.1",lastUpdatedBy:"Kristian Lange",lastUpdatedAt:1752785825,formattedLastUpdatedAt:"Jul 17, 2025",sidebarPosition:3,frontMatter:{title:"Adapt pre written code to run it in JATOS",slug:"/Adapt-pre-written-code-to-run-it-in-JATOS.html",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Write your own study - Basics and beyond",permalink:"/Write-your-own-Study-Basics-and-Beyond.html"},next:{title:"Combine two pre-written studies into one",permalink:"/Combine-two-pre-written-studies-into-one.html"}},l={},p=[{value:"Add the Study in Your Local JATOS",id:"add-the-study-in-your-local-jatos",level:3},{value:"Edit Your HTML and JavaScript",id:"edit-your-html-and-javascript",level:3},{value:"Beyond the Basics",id:"beyond-the-basics",level:3}],u={toc:p};function d(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Make your existing code run in JATOS"),": Do you have a task, experiment, survey, or study already running in a browser, complete with its HTML, JavaScripts, and image files? If you now want to run it with JATOS, this page will guide you through the process."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Developing a JATOS study typically happens on your local JATOS installation. For an overview, see: ",(0,r.kt)("a",{parentName:"strong",href:"Run-an-experiment-with-JATOS-Workflow.html"},"Run an experiment with JATOS - Workflow"))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"add-the-study-in-your-local-jatos"},"Add the Study in Your Local JATOS"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Add a New Study:")," In the JATOS GUI, click ",(0,r.kt)("strong",{parentName:"p"},"Studies"),' in the header, then click "',(0,r.kt)("strong",{parentName:"p"},"+"),'", followed by ',(0,r.kt)("strong",{parentName:"p"},"New Study"),". Choose a title for your study and click ",(0,r.kt)("strong",{parentName:"p"},"Add"),". JATOS will create a new folder within your assets root folder. By default, this folder will be named with the study's UUID and located in ",(0,r.kt)("inlineCode",{parentName:"p"},"/path_to_your_JATOS/study_assets_root/"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Copy Your Files:")," Copy all your study files (HTML, JavaScripts, images, audio, etc.) into this new study folder.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Add a New Component:")," Back in the JATOS GUI, within the study you just added, click ",(0,r.kt)("strong",{parentName:"p"},"New Component"),". Choose a title and set the HTML file name to the name of the HTML file you copied into the study folder.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Specify File Paths:")," In your HTML, CSS, and JavaScript files, you can use either relative or absolute paths for your assets. ",(0,r.kt)("strong",{parentName:"p"},"Relative paths are recommended")," because they are shorter and remain valid after exporting and importing a study."),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Relative paths:")," Simply use the relative path within your study's folder."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Example:")," If a file named ",(0,r.kt)("inlineCode",{parentName:"li"},"survey.js")," is in the root of the study assets folder:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script src="survey.js"><\/script>\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Example:")," If the file is in a subfolder named ",(0,r.kt)("inlineCode",{parentName:"li"},"lib"),":",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script src="lib/survey.js"><\/script>\n'))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Absolute paths (deprecated):")," Always use the prefix ",(0,r.kt)("inlineCode",{parentName:"p"},"/study_assets/")," followed by the study assets name you specified in your study's properties when you created it."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("em",{parentName:"p"},"Example:")," If you want to load the file ",(0,r.kt)("inlineCode",{parentName:"p"},"survey.js")," and the study assets folder is ",(0,r.kt)("inlineCode",{parentName:"p"},"my-exp"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script src="/study_assets/my-exp/survey.js"><\/script>\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Note: For absolute paths, ensure you understand the difference between the ",(0,r.kt)("inlineCode",{parentName:"p"},"study_assets_root")," folder and the placeholder ",(0,r.kt)("inlineCode",{parentName:"p"},"study_assets")," in your path names. ",(0,r.kt)("inlineCode",{parentName:"p"},"study_assets_root")," is the folder on your system (or server) where the assets (HTML, JS, CSS, images, etc.) of ",(0,r.kt)("strong",{parentName:"p"},"all")," your JATOS studies will be stored. You can ",(0,r.kt)("a",{parentName:"p",href:"JATOS_Configuration.html#study-assets-root-path"},"configure")," the location of this folder. ",(0,r.kt)("inlineCode",{parentName:"p"},"study_assets"),", on the other hand, is just a placeholder that will go in your HTML files. JATOS will interpret this and replace the placeholder with the path (specific to the study) that you entered in the field 'Study assets directory name' in your Study's Properties. The advantage of this is that you can change the location or name of the assets for any study, or export-import a study into a different computer, and the study will still run without having to make any changes in the HTML code.")))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"First Glimpse:"),' Click the "',(0,r.kt)("strong",{parentName:"p"},"Run"),"\" button in either the study's or the component's toolbar. Your experiment should run just as it did before JATOS. Use your browser's developer tools to check for any missing files or other errors."))),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"edit-your-html-and-javascript"},"Edit Your HTML and JavaScript"),(0,r.kt)("p",null,"Up to this point, JATOS has simply served your files. Now, we'll use a key JATOS feature: storing your result data in JATOS' database."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Include ",(0,r.kt)("em",{parentName:"strong"},"jatos.js"),":")," Add the ",(0,r.kt)("inlineCode",{parentName:"p"},"_jatos.js_")," library to your HTML file. Place the following line within your ",(0,r.kt)("inlineCode",{parentName:"p"},"<head>")," section:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script src="jatos.js"><\/script>\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Add ",(0,r.kt)("inlineCode",{parentName:"strong"},"jatos.onLoad"),":")," Most JATOS studies begin with this call. Whatever you want your study to do should start within this function."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"jatos.onLoad(function() {\n  // start your code here\n});\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Send Your Result Data:")," To send your result data to JATOS, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"_jatos.js_")," function ",(0,r.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatossubmitresultdata"},(0,r.kt)("inlineCode",{parentName:"a"},"jatos.submitResultData")),". You can pass this function any data in text format, including JSON, CSV, or XML. If you pass a JavaScript object, it will be automatically converted to JSON (stringified)."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("em",{parentName:"p"},"Example:")," If you want to send a JavaScript object as JSON:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"jatos.submitResultData(myResultDataObject);\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"jatos.submitResultData")," saves the data into the JATOS database, overwriting any data previously submitted for that component. If you prefer not to overwrite data, use ",(0,r.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatosappendresultdata"},(0,r.kt)("inlineCode",{parentName:"a"},"jatos.appendResultData"))," instead.")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Upload Files:")," Instead of submitting text, you can also upload files using ",(0,r.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatosuploadresultfile"},(0,r.kt)("inlineCode",{parentName:"a"},"jatos.uploadResultFile")),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Navigate or End Study:")," At the end of your component, you'll typically want to either move to the next component or end the study."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"To jump to the next component:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"jatos.startNextComponent();\n"))),(0,r.kt)("li",{parentName:"ul"},"To finish the study:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"jatos.endStudy();\n"))),(0,r.kt)("li",{parentName:"ul"},"You can combine these calls with sending result data:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"jatos.startNextComponent(myResultDataObject);\n")),"or",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"jatos.endStudy(myResultDataObject);\n")))))),(0,r.kt)("p",null,"That covers the basics. You can find more information about other ",(0,r.kt)("inlineCode",{parentName:"p"},"_jatos.js_")," functions and variables in the ",(0,r.kt)("a",{parentName:"p",href:"jatos.js-Reference.html"},"reference"),"."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"beyond-the-basics"},"Beyond the Basics"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Divide into Components:")," Consider dividing your study into ",(0,r.kt)("strong",{parentName:"li"},"several components"),". For instance, you could have separate components for introduction, training, experiment, and feedback. You might even split the experiment itself into multiple parts. An advantage of this approach is that if a participant stops midway through your study, you still retain the result data from the completed initial components. Additionally, components can be reused in different studies."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Use Input Parameters:")," Utilize the ",(0,r.kt)("strong",{parentName:"li"},"study input"),", ",(0,r.kt)("strong",{parentName:"li"},"component input"),", or ",(0,r.kt)("strong",{parentName:"li"},"batch input")," fields, which are defined in the study, component, or batch properties, respectively. These allow you to change variables in your code directly through JATOS' GUI, which can be more comfortable than editing JavaScript."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Add a Quit Button:")," You can add a ",(0,r.kt)("strong",{parentName:"li"},"quit button")," with ",(0,r.kt)("a",{parentName:"li",href:"jatos.js-Reference.html#jatosaddabortbutton"},"jatos.addAbortButton"),"    to your study, allowing the participant to ",(0,r.kt)("a",{parentName:"li",href:"Data-Privacy-and-Ethics.html#things-you-should-consider-in-your-studies"},"abort at any time"),".")))}d.isMDXComponent=!0}}]);