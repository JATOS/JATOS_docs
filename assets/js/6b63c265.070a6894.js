"use strict";(self.webpackChunkjatos_docs=self.webpackChunkjatos_docs||[]).push([[9253],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>g});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=u(n),g=a,c=d["".concat(p,".").concat(g)]||d[g]||m[g]||o;return n?r.createElement(c,i(i({ref:t},l),{},{components:n})):r.createElement(c,i({ref:t},l))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},75717:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var r=n(83117),a=(n(67294),n(3905));const o={title:"Write Group Studies II - JavaScript and Messaging",slug:"/Write-Group-Studies-II-JavaScript-and-Messaging.html",sidebar_position:3},i=void 0,s={unversionedId:"Group_studies/Write-Group-Studies-II-JavaScript-and-Messaging",id:"version-3.9.1/Group_studies/Write-Group-Studies-II-JavaScript-and-Messaging",title:"Write Group Studies II - JavaScript and Messaging",description:"Writing JavaScript for Group Studies",source:"@site/versioned_docs/version-3.9.1/Group_studies/Write-Group-Studies-II-JavaScript-and-Messaging.md",sourceDirName:"Group_studies",slug:"/Write-Group-Studies-II-JavaScript-and-Messaging.html",permalink:"/Write-Group-Studies-II-JavaScript-and-Messaging.html",draft:!1,editUrl:"https://github.com/JATOS/JATOS_docs/tree/main/versioned_docs/version-3.9.1/Group_studies/Write-Group-Studies-II-JavaScript-and-Messaging.md",tags:[],version:"3.9.1",lastUpdatedBy:"elisafilevich",lastUpdatedAt:1754297872,formattedLastUpdatedAt:"Aug 4, 2025",sidebarPosition:3,frontMatter:{title:"Write Group Studies II - JavaScript and Messaging",slug:"/Write-Group-Studies-II-JavaScript-and-Messaging.html",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Write Group Studies I - Setup",permalink:"/Write-Group-Studies-I-Setup.html"},next:{title:"Bring your JATOS online",permalink:"/Bring-your-JATOS-online.html"}},p={},u=[{value:"Writing JavaScript for Group Studies",id:"writing-javascript-for-group-studies",level:2},{value:"Joining a Group and Opening Group Channels",id:"joining-a-group-and-opening-group-channels",level:3},{value:"Reassigning to a Different Group",id:"reassigning-to-a-different-group",level:3},{value:"Fixing a Group",id:"fixing-a-group",level:3},{value:"Communication Between Group Members",id:"communication-between-group-members",level:2},{value:"Direct Messaging",id:"direct-messaging",level:3},{value:"Broadcast Messaging",id:"broadcast-messaging",level:3},{value:"Group Session",id:"group-session",level:3}],l={toc:u};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"writing-javascript-for-group-studies"},"Writing JavaScript for Group Studies"),(0,a.kt)("p",null,"Group studies differ from single-worker studies in that the JavaScript must handle groups and communication between members. The ",(0,a.kt)("em",{parentName:"p"},"jatos.js")," library provides several useful functions for this purpose."),(0,a.kt)("p",null,"If you want to dive right into the ",(0,a.kt)("em",{parentName:"p"},"jatos.js")," reference:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"jatos.js-Reference.html#group-functions"},(0,a.kt)("em",{parentName:"a"},"jatos.js")," functions for group studies")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"jatos.js-Reference.html#group-variables"},(0,a.kt)("em",{parentName:"a"},"jatos.js")," group variables")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"jatos.js-Reference.html#functions-to-access-the-group-session"},(0,a.kt)("em",{parentName:"a"},"jatos.js")," Group Session functions"))),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"joining-a-group-and-opening-group-channels"},"Joining a Group and Opening Group Channels"),(0,a.kt)("p",null,"Workers can only communicate with members of their own group, so all interacting workers must join the same group.",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("strong",{parentName:"p"},"A worker remains in a group until ",(0,a.kt)("em",{parentName:"strong"},"jatos.js")," is explicitly told to leave (or the study run finishes). This means that if a worker moves between components or reloads a page, they will still remain in the same group.")," This feature makes groups much more robust."),(0,a.kt)("p",null,"A typical JATOS group study might have three components:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Component 1")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"jatos.joinGroup")," \u2192 joins group and opens group channel"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"jatos.nextComponent")," \u2192 closes group channel and moves to the next component")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Component 2")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"jatos.joinGroup")," \u2192 opens group channel in the ",(0,a.kt)("strong",{parentName:"li"},"same group")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"jatos.nextComponent")," \u2192 closes group channel and moves to the next component")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Component 3")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"jatos.joinGroup")," \u2192 opens group channel in the ",(0,a.kt)("strong",{parentName:"li"},"same group")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"jatos.endStudy")," \u2192 closes group channel, leaves group, ends component, and ends study")),(0,a.kt)("p",null,"Notice that calling ",(0,a.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatosjoingroup"},(0,a.kt)("inlineCode",{parentName:"a"},"jatos.joinGroup"))," in the second and third components does not let workers join a new group, but simply opens a group channel in the already joined group. To make a worker leave a group, use ",(0,a.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatosleavegroup"},(0,a.kt)("inlineCode",{parentName:"a"},"jatos.leaveGroup")),"."),(0,a.kt)("p",null,"If you want to see who the members of your groups are, or get other stats, click your batch's ",(0,a.kt)("a",{parentName:"p",href:"Run-your-Study-with-Study-Links.html#groups"},"Groups button in the Study Links page"),"."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"reassigning-to-a-different-group"},"Reassigning to a Different Group"),(0,a.kt)("p",null,"To move a worker from one group to another, use ",(0,a.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatosreassigngroup"},(0,a.kt)("inlineCode",{parentName:"a"},"jatos.reassignGroup")),". This function will make a worker leave their current group and join a different one. JATOS can only reassign to another group if one is available; if not, the worker will remain in their original group."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"fixing-a-group"},"Fixing a Group"),(0,a.kt)("p",null,'Sometimes you want to "lock" a group so no new members can join, even if the group properties would allow it. For example, in the ',(0,a.kt)("a",{parentName:"p",href:"/Example-Studies"},"Prisoner's Dilemma Example Study"),", after the group is assembled in the waiting room, you want to keep the two members fixed\u2014even if one leaves during the game, JATOS should not assign a new member. To do this, call ",(0,a.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatossetgroupfixed"},(0,a.kt)("inlineCode",{parentName:"a"},"jatos.setGroupFixed")),". Alternatively, you can fix a group in the JATOS GUI, in the ",(0,a.kt)("a",{parentName:"p",href:"Run-your-Study-with-Study-Links.html#groups"},"Groups table on the Study Links page"),"."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"communication-between-group-members"},"Communication Between Group Members"),(0,a.kt)("p",null,"JATOS provides three ways for group members to communicate: direct messaging, broadcast messaging, and the Group Session."),(0,a.kt)("h3",{id:"direct-messaging"},"Direct Messaging"),(0,a.kt)("p",null,"Members can send direct messages to a single other member of the same group using ",(0,a.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatossendgroupmsgto"},(0,a.kt)("inlineCode",{parentName:"a"},"jatos.sendGroupMsgTo")),". Like broadcast messaging, this method is fast but can be unreliable if the network connection is unstable. For example, in the ",(0,a.kt)("a",{parentName:"p",href:"/Example-Studies"},"Snake Example"),", direct messaging is used to send the coordinates of the snakes at every step. Here, speed is more important than reliability, since a few dropped frames will likely go unnoticed."),(0,a.kt)("h3",{id:"broadcast-messaging"},"Broadcast Messaging"),(0,a.kt)("p",null,"Members can send messages to all other members of the same group using ",(0,a.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#jatossendgroupmsg"},(0,a.kt)("inlineCode",{parentName:"a"},"jatos.sendGroupMsg")),". Like direct messaging, this method is fast but can be unreliable on unstable networks."),(0,a.kt)("h3",{id:"group-session"},"Group Session"),(0,a.kt)("p",null,"The Group Session is one of the ",(0,a.kt)("a",{parentName:"p",href:"Session-Data-Three-Types.html"},"three types of session that JATOS provides"),". Members can access Group Session data with the ",(0,a.kt)("a",{parentName:"p",href:"jatos.js-Reference.html#functions-to-access-the-group-session"},"Group Session functions"),". Group Session data is stored in JATOS' database ",(0,a.kt)("strong",{parentName:"p"},"only while the group is active")," and is deleted when the group finishes. Communication via Group Session is slower but more reliable than group messaging. If a member has an unstable internet connection or reloads the page, the Group Session will be automatically restored when the group channel is reopened. In the ",(0,a.kt)("a",{parentName:"p",href:"/Example-Studies"},"Prisoner's Dilemma Example Study"),", workers communicate via Group Session data, since a dropped message (direct or broadcast messaging) could result in important information loss."))}m.isMDXComponent=!0}}]);