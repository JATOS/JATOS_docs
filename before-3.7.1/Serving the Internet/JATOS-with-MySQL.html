<!doctype html>
<html class="docs-version-1.0.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="JATOS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="JATOS Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-57013276-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">JATOS with MySQL | JATOS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://v2.jatos.org/before-3.7.1/Serving the Internet/JATOS-with-MySQL"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="1.0.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-1.0.0"><meta data-react-helmet="true" property="og:title" content="JATOS with MySQL | JATOS"><meta data-react-helmet="true" name="description" content="By default JATOS uses an embedded H2 database and no further setup is necessary but it can be easily configured to work with a MySQL database."><meta data-react-helmet="true" property="og:description" content="By default JATOS uses an embedded H2 database and no further setup is necessary but it can be easily configured to work with a MySQL database."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://v2.jatos.org/before-3.7.1/Serving the Internet/JATOS-with-MySQL"><link data-react-helmet="true" rel="alternate" href="https://v2.jatos.org/before-3.7.1/Serving the Internet/JATOS-with-MySQL" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://v2.jatos.org/before-3.7.1/Serving the Internet/JATOS-with-MySQL" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9a3f5999.css">
<link rel="preload" href="/assets/js/runtime~main.d96f1455.js" as="script">
<link rel="preload" href="/assets/js/main.d65c9bbf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/jatos_logo_color.svg" alt="JATOS Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/jatos_logo_color.svg" alt="JATOS Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">JATOS</b></a><a class="navbar__item navbar__link navbar__link--active" href="/before-3.7.1/overview/Whats-JATOS">Documentation</a><a class="navbar__item navbar__link" href="/Example-Studies">Example Studies</a><a class="navbar__item navbar__link navbar__link--active" href="/before-3.7.1/overview/Contact-us">Contact</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/before-3.7.1/overview/Whats-JATOS">&lt; 3.7.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/./Serving the Internet/JATOS-with-MySQL">3.7.1 (current)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/before-3.7.1/Serving the Internet/JATOS-with-MySQL">&lt; 3.7.1</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://buymeacoffee.com/jatos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Buy me a coffee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="http://blog.jatos.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/JATOS/JATOS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Write your study</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Run your study</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Manage your JATOS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Group Studies</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Serving the Internet</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/Bring-your-JATOS-online">Bring your JATOS online</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/Expose-your-local-JATOS">Expose your local JATOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/JATOS-on-DigitalOcean">JATOS on DigitalOcean</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/JATOS-in-Amazons-Cloud-without-Docker">JATOS on AWS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/JATOS-on-a-server">Install JATOS on a server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/Configure-JATOS-on-a-Server">Configure JATOS on a Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/before-3.7.1/Serving the Internet/JATOS-with-MySQL">JATOS with MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/JATOS-with-Nginx">JATOS with Nginx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/JATOS-with-Apache">JATOS with Apache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/Updating-a-JATOS-server-installation">Updating a JATOS server installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/Customize-JATOS-Home-Page">Customize JATOS&#x27; Home Page</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/before-3.7.1/Serving the Internet/Install-JATOS-via-Docker">Install JATOS via Docker</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->&lt; 3.7.1</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>JATOS with MySQL</h1></header><p>By default JATOS uses an embedded H2 database and no further setup is necessary but it can be easily configured to work with a MySQL database.</p><p>Possible scenarios why one would use an external database are</p><ul><li>your JATOS will be used by more than a few users (e.g. several research groups or an institute-wide installation)</li><li>your JATOS will run studies with many participants</li><li>the expected traffic is rather high (the studies produce a lot of result data)</li><li>you want to be able to do a regular database backup (with the embedded H2 database this would involve stopping JATOS)</li><li>higher trust in the reliability of MySQL (although we had no problems with H2 so far)</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="installation">Installation<a aria-hidden="true" class="hash-link" href="#installation" title="Direct link to heading">â€‹</a></h2><p>One could install the external database on the same server as JATOS is running or on an extra server depending on ones need.</p><p>There are many manuals out there, e.g. <a href="https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-20-04" target="_blank" rel="noopener noreferrer">this one</a>. One way to set up MySQL:</p><ol><li><p>Install MySQL, e.g. on Ubuntu</p><p><strong>JATOS requires MySQL &gt;= 5.7 (8.x is fine)</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> mysql-server</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Log in to MySQL&#x27;s command line terminal:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root -p</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Create a database for JATOS:</p><p><strong>Character set and collation are important - otherwise you won&#x27;t have full UTF-8 support</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE jatos CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Create a user for JATOS: </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE </span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;jatosuser&#x27;</span><span class="token plain">@</span><span class="token string" style="color:#e3116c">&#x27;localhost&#x27;</span><span class="token plain"> IDENTIFIED BY </span><span class="token string" style="color:#e3116c">&#x27;myPassword&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Remember your username and password. You need them when configuring JATOS later on.</p></li><li><p>Grant privileges to the new user:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">GRANT ALL PRIVILEGES ON jatos.* TO </span><span class="token string" style="color:#e3116c">&#x27;jatosuser&#x27;</span><span class="token plain">@</span><span class="token string" style="color:#e3116c">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>You can test the new user: log out of MySQL with <code>exit</code> and back in with the newly created user:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u jatosuser -p</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><p><strong>Appart from giving JATOS access to the database it is not necessary to create any tables - JATOS is doing this automatically.</strong></p><p>Now you have to configure JATOS to use your MySQL.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configure-jatos">Configure JATOS<a aria-hidden="true" class="hash-link" href="#configure-jatos" title="Direct link to heading">â€‹</a></h2><p>There are three ways to set up JATOS to work with a MySQL database. If you are in doubt use &#x27;production.conf&#x27;.</p><ol><li><p>Via JATOS config file which is in your JATOS folder in the <code>conf</code> folder: <code>conf/production.conf</code></p><p>Change IP, port, username and password to your needs.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">db.default.url</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;jdbc:mysql://127.0.0.1:3306/jatos?characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.default.user</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;jatosuser&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.default.password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;mypassword&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.default.driver</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">com.mysql.cj.jdbc.Driver</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Always restart JATOS after making any changes to the configuration (e.g. with <code>./loader.sh restart</code>)</strong></p></li><li><p>Via command-line arguments:</p><ul><li><code>-DJATOS_DB_URL</code> - specifies the URL to the database</li><li><code>-DJATOS_DB_USERNAME</code> - set your username</li><li><code>-DJATOS_DB_PASSWORD</code> - set your password</li><li><code>-DJATOS_DB_DRIVER</code> - always <code>com.mysql.cj.jdbc.Driver</code> for MySQL</li></ul><p>E.g. to connect to a MySQL running on 127.0.0.1 and port 3306 use (but change username and password):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">loader.sh start -DJATOS_DB_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;jdbc:mysql://127.0.0.1:3306/jatos?characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&#x27;</span><span class="token plain"> -DJATOS_DB_USERNAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">sa -DJATOS_DB_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">sa -DJATOS_DB_DRIVER</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">com.mysql.cj.jdbc.Driver</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Via environment variables (change IP, port, username and password)</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JATOS_DB_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;jdbc:mysql://127.0.0.1:3306/jatos?characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JATOS_DB_USERNAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jatosuser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JATOS_DB_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;mypassword&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JATOS_DB_DRIVER</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">com.mysql.cj.jdbc.Driver</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><p>You can confirm that JATOS is accessing the correct database by opening JATOS&#x27; <em>Administration</em> page in a browser and then click on <em>System Info</em>: The field <em>DB URL</em> should resemble the one from your config. In older JATOS versions you can find this <em>DB URL</em> field under &#x27;/jatos/test&#x27;. Another way is by looking in the logs: you should see a line after JATOS started similar to this (with your database URI):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">14</span><span class="token plain">:06:01.760 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> - p.a.d.DefaultDBApi - Database </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">default</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> initialized at jdbc:mysql://localhost/jatos?characterEncoding</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">UTF-8</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">useJDBCCompliantTimezoneShift</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">useLegacyDatetimeCode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token assign-left variable" style="color:#36acaa">serverTimezone</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">UTC</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Done. Your JATOS uses your MySQL now.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="optional-deactivate-mysqls-binary-log">[Optional]<!-- --> Deactivate MySQL&#x27;s binary log<a aria-hidden="true" class="hash-link" href="#optional-deactivate-mysqls-binary-log" title="Direct link to heading">â€‹</a></h2><p>MySQL&#x27;s binary logs (also called binlogs) serve two purposes: replication and data recovery. More can be found in <a href="https://dev.mysql.com/doc/internals/en/binary-log-overview.html#:~:text=The%20binary%20log%20is%20a,14." target="_blank" rel="noopener noreferrer">MySQLs documentation</a>.</p><p>The problem with binary logs is that they can take up quite some disk space depending on the experiments you run on your JATOS. The location of those log files is specified in MySQL&#x27;s config but on many systems they are under <code>/var/lib/mysql</code>. If you have a single MySQL instance (and therefore do not use replication) and you do not need MySQL&#x27;s data recovery (e.g. have a different backup mechanism) than it is safe to deactivate the binary logs. </p><p>Add <code>skip-log-bin</code> to the end of your MySQL config (<a href="https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html#option_mysqld_log-bin" target="_blank" rel="noopener noreferrer">details</a>). On many Linux systems the config is in <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>.</p><p>The part of your &#x27;mysqld.cnf&#x27; that configures the binary logs could then look similar to this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># The following can be used as easy to replay backup logs or for replication.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># note: if you are setting up a replication slave, see README.Debian about</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#       other settings you may need to change.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># server-id             = 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># log_bin                       = /var/log/mysql/mysql-bin.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># binlog_expire_logs_seconds    = 2592000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># max_binlog_size   = 100M</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># binlog_do_db          = include_database_name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># binlog_ignore_db      = include_database_name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">skip-log-bin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You have to restart MySQL for the changes to take effect.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="optional-increase-max_allowed_packet-size-in-older-mysqls">[Optional]<!-- --> Increase &#x27;max_allowed_packet&#x27; size in older MySQLs<a aria-hidden="true" class="hash-link" href="#optional-increase-max_allowed_packet-size-in-older-mysqls" title="Direct link to heading">â€‹</a></h2><p>If you have an older MySQL (&lt; 8.x.x) and your experiments will have large resut data you might want to increase the &#x27;<a href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_max_allowed_packet" target="_blank" rel="noopener noreferrer">max_allowed_packet</a>&#x27; size. If your result data is larger than the &#x27;max_allowed_packet&#x27; JATOS will just return an &#x27;internal server error&#x27;. In JATOS&#x27; log in will look similar to this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[ERROR] - g.ErrorHandler - Internal JATOS error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ERROR] - o.h.e.j.s.SqlExceptionHelper - Packet for query is too large (5,920,824 &gt; 4,194,304). You can change this value on the server by setting the &#x27;max_allowed_packet&#x27; variable.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[WARN] - o.h.e.j.s.SqlExceptionHelper - SQL Error: 0, SQLState: S1000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>From 8.x.x the &#x27;max_allowed_packet&#x27; is by default 64MB and this is usually more than enough. But in version smaller than 8.x.x it is just 4MB by default and before 5.6.6 it&#x27;s just 1MB.  </p><p>To increase the &#x27;max_allowed_packet&#x27; size just add it to the end of your MySQL config. On many Linux systems the config is in <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>. E.g. to set it to 64MB:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">max_allowed_packet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">64M</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You have to restart MySQL for the changes to take effect.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/versioned_docs/version-1.0.0/Serving the Internet/JATOS-with-MySQL.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-12-07T17:01:01.000Z">12/7/2021</time></b> by <b>Kristian Lange</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/before-3.7.1/Serving the Internet/Configure-JATOS-on-a-Server"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Configure JATOS on a Server</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/before-3.7.1/Serving the Internet/JATOS-with-Nginx"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JATOS with Nginx<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#configure-jatos" class="table-of-contents__link toc-highlight">Configure JATOS</a></li><li><a href="#optional-deactivate-mysqls-binary-log" class="table-of-contents__link toc-highlight">Optional Deactivate MySQL&#39;s binary log</a></li><li><a href="#optional-increase-max_allowed_packet-size-in-older-mysqls" class="table-of-contents__link toc-highlight">Optional Increase &#39;max_allowed_packet&#39; size in older MySQLs</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/Whats-JATOS">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">JATOS is <a href="https://github.com/JATOS/JATOS">open source</a> and published under <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, version 2.0</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.d96f1455.js"></script>
<script src="/assets/js/main.d65c9bbf.js"></script>
</body>
</html>